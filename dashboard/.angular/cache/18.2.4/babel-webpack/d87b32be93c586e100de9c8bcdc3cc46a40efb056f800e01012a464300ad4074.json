{"ast":null,"code":"import _asyncToGenerator from \"/home/orcrist/Desktop/device-monitoring/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { APIService } from \"../../services/api.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nfunction OverviewComponent_mat_progress_bar_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 11);\n  }\n}\nfunction OverviewComponent_mat_icon_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 12);\n    i0.ɵɵtext(1, \"wifi_off\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_mat_icon_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 13);\n    i0.ɵɵtext(1, \"wifi\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_mat_icon_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 13);\n    i0.ɵɵtext(1, \"help_outline\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_mat_icon_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"highlight_off\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_mat_icon_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"check_circle_outline\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_button_57_mat_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"lock_open\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_button_57_mat_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"lock\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OverviewComponent_button_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵtemplate(1, OverviewComponent_button_57_mat_icon_1_Template, 2, 0, \"mat-icon\", 7)(2, OverviewComponent_button_57_mat_icon_2_Template, 2, 0, \"mat-icon\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r0.deviceInfo == null ? null : ctx_r0.deviceInfo.dhcp == null ? null : ctx_r0.deviceInfo.dhcp.enabled));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.deviceInfo == null ? null : ctx_r0.deviceInfo.dhcp == null ? null : ctx_r0.deviceInfo.dhcp.enabled);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" Turn DHCP \", (ctx_r0.deviceInfo == null ? null : ctx_r0.deviceInfo.dhcp == null ? null : ctx_r0.deviceInfo.dhcp.enabled) ? \"Off\" : \"On\", \" \");\n  }\n}\nfunction OverviewComponent_mat_progress_bar_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 11);\n  }\n}\nfunction OverviewComponent_ng_container_86_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"mat-divider\");\n    i0.ɵɵelementStart(2, \"mat-list-item\")(3, \"div\", 3)(4, \"p\");\n    i0.ɵɵtext(5, \"Divider Sensors\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.dividerSensorStatus);\n  }\n}\nexport let OverviewComponent = /*#__PURE__*/(() => {\n  class OverviewComponent {\n    // public maintenanceMode: boolean;\n    constructor(api) {\n      this.api = api;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.deviceInfo = yield _this.api.getDeviceInfo();\n        console.log(\"device info\", _this.deviceInfo);\n        _this.pingResult = yield _this.api.getRoomPing();\n        console.log(\"ping result\", _this.pingResult);\n        _this.hasDividerSensors = yield _this.getDividerSensors();\n        _this.connected();\n        setInterval(() => {\n          _this.connected();\n        }, 2000);\n        /*\n        this.maintenanceMode = await this.api.getMaintenanceMode();\n        console.log(\"maintenanceMode\", this.maintenanceMode);\n         */\n      })();\n    }\n    isDefined(test) {\n      return typeof test !== \"undefined\" && test !== null;\n    }\n    toggleMaintenanceMode() {\n      return _asyncToGenerator(function* () {})();\n    } /*\n      console.log(\"toggling maintenance mode\");\n           this.maintenanceMode = await this.api.toggleMaintenanceMode();\n      console.log(\"maintenanceMode\", this.maintenanceMode);\n       */\n    reachable() {\n      if (!this.pingResult) {\n        return 0;\n      }\n      return Array.from(this.pingResult.values()).filter(r => r.packetsLost === 0).length;\n    }\n    unreachable() {\n      if (!this.pingResult) {\n        return 0;\n      }\n      return Array.from(this.pingResult.values()).filter(r => r.packetsLost > 0).length;\n    }\n    getDividerSensors() {\n      for (const k of Array.from(this.pingResult.keys())) {\n        if (k.includes(\"DS1\")) {\n          this.dividerSensorAddr = k + \".byu.edu\";\n          return true;\n        }\n      }\n      return false;\n    }\n    connected() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if ((yield _this2.api.getDividerSensorsStatus(_this2.dividerSensorAddr)) == true) {\n          _this2.dividerSensorStatus = \"Connected\";\n        } else {\n          _this2.dividerSensorStatus = \"Disconnected\";\n        }\n      })();\n    }\n    static #_ = this.ɵfac = function OverviewComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || OverviewComponent)(i0.ɵɵdirectiveInject(i1.APIService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OverviewComponent,\n      selectors: [[\"overview\"]],\n      decls: 87,\n      vars: 14,\n      consts: [[1, \"card-container\"], [1, \"card\"], [\"color\", \"accent\", \"mode\", \"query\", 4, \"ngIf\"], [1, \"list-item\"], [\"id\", \"status-theme\"], [\"color\", \"primary\", 4, \"ngIf\"], [\"color\", \"warn\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 4, \"ngIf\"], [\"color\", \"accent\", \"mode\", \"query\"], [\"color\", \"primary\"], [\"color\", \"warn\"], [\"mat-raised-button\", \"\", \"color\", \"accent\"]],\n      template: function OverviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-card\", 1);\n          i0.ɵɵtemplate(2, OverviewComponent_mat_progress_bar_2_Template, 1, 0, \"mat-progress-bar\", 2);\n          i0.ɵɵelementStart(3, \"mat-card-header\")(4, \"mat-card-title\");\n          i0.ɵɵtext(5, \"System Info\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"mat-card-content\")(7, \"mat-list\")(8, \"mat-list-item\")(9, \"div\", 3)(10, \"p\");\n          i0.ɵɵtext(11, \"Hostname\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"p\");\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(14, \"mat-divider\");\n          i0.ɵɵelementStart(15, \"mat-list-item\")(16, \"div\", 3)(17, \"p\");\n          i0.ɵɵtext(18, \"ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"p\");\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(21, \"mat-divider\");\n          i0.ɵɵelementStart(22, \"mat-list-item\")(23, \"div\", 3)(24, \"p\");\n          i0.ɵɵtext(25, \"IP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"p\");\n          i0.ɵɵtext(27);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(28, \"mat-divider\");\n          i0.ɵɵelementStart(29, \"mat-list-item\")(30, \"div\", 3)(31, \"p\");\n          i0.ɵɵtext(32, \"Internet Connectivity\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 4);\n          i0.ɵɵtemplate(34, OverviewComponent_mat_icon_34_Template, 2, 0, \"mat-icon\", 5)(35, OverviewComponent_mat_icon_35_Template, 2, 0, \"mat-icon\", 6);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(36, \"mat-divider\");\n          i0.ɵɵelementStart(37, \"mat-list-item\")(38, \"div\", 3)(39, \"p\");\n          i0.ɵɵtext(40, \"DHCP Enabled\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"div\", 4);\n          i0.ɵɵtemplate(42, OverviewComponent_mat_icon_42_Template, 2, 0, \"mat-icon\", 6)(43, OverviewComponent_mat_icon_43_Template, 2, 0, \"mat-icon\", 7)(44, OverviewComponent_mat_icon_44_Template, 2, 0, \"mat-icon\", 7);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(45, \"mat-divider\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(46, \"mat-card-actions\")(47, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function OverviewComponent_Template_button_click_47_listener() {\n            return ctx.api.switchToUI();\n          });\n          i0.ɵɵelementStart(48, \"mat-icon\");\n          i0.ɵɵtext(49, \"arrow_back\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(50, \" Back To UI \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function OverviewComponent_Template_button_click_51_listener() {\n            return ctx.api.flushDNS();\n          });\n          i0.ɵɵtext(52, \" Flush DNS \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function OverviewComponent_Template_button_click_53_listener() {\n            return ctx.api.reboot();\n          });\n          i0.ɵɵelementStart(54, \"mat-icon\");\n          i0.ɵɵtext(55, \"power_settings_new\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(56, \" Reboot \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(57, OverviewComponent_button_57_Template, 4, 3, \"button\", 10);\n          i0.ɵɵelementStart(58, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function OverviewComponent_Template_button_click_58_listener() {\n            return ctx.api.reSyncDB();\n          });\n          i0.ɵɵelementStart(59, \"mat-icon\");\n          i0.ɵɵtext(60, \"sync\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(61, \" ReSync \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(62, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function OverviewComponent_Template_button_click_62_listener() {\n            return ctx.api.refreshContainers();\n          });\n          i0.ɵɵelementStart(63, \"mat-icon\");\n          i0.ɵɵtext(64, \"refresh\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(65, \" Refresh Containers \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(66, \"mat-card\", 1);\n          i0.ɵɵtemplate(67, OverviewComponent_mat_progress_bar_67_Template, 1, 0, \"mat-progress-bar\", 2);\n          i0.ɵɵelementStart(68, \"mat-card-header\")(69, \"mat-card-title\");\n          i0.ɵɵtext(70, \"Room Status\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(71, \"mat-card-content\")(72, \"mat-list\")(73, \"mat-list-item\")(74, \"div\", 3)(75, \"p\");\n          i0.ɵɵtext(76, \"Devices Reachable\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(77, \"p\");\n          i0.ɵɵtext(78);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(79, \"mat-divider\");\n          i0.ɵɵelementStart(80, \"mat-list-item\")(81, \"div\", 3)(82, \"p\");\n          i0.ɵɵtext(83, \"Devices Unreachable\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(84, \"p\");\n          i0.ɵɵtext(85);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(86, OverviewComponent_ng_container_86_Template, 8, 1, \"ng-container\", 7);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.deviceInfo == null);\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate(ctx.deviceInfo == null ? null : ctx.deviceInfo.hostname);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.deviceInfo == null ? null : ctx.deviceInfo.id);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.deviceInfo == null ? null : ctx.deviceInfo.ip);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.deviceInfo == null ? null : ctx.deviceInfo.internetConnectivity);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !(ctx.deviceInfo == null ? null : ctx.deviceInfo.internetConnectivity));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isDefined(ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.enabled));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isDefined(ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.enabled) && !(ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.enabled));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isDefined(ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.enabled) && (ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.enabled));\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngIf\", ctx.deviceInfo == null ? null : ctx.deviceInfo.dhcp == null ? null : ctx.deviceInfo.dhcp.toggleable);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", ctx.pingResult == null);\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate(ctx.reachable());\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.unreachable());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDividerSensors);\n        }\n      },\n      styles: [\"html[_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:inherit}.card-container[_ngcontent-%COMP%]{margin:1.5em auto;width:95%;column-gap:1em;column-fill:initial;column-count:1;transition:all .5s ease-in-out}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 1.5em;break-inside:avoid}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{top:-24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1vh}.list-item[_ngcontent-%COMP%]{font-size:85%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}\"]\n    });\n  }\n  return OverviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}